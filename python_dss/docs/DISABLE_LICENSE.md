# Отключение проверки лицензии для тестирования

## ⚠️ ВНИМАНИЕ

**Эта функция предназначена ТОЛЬКО для тестирования и разработки!**

Не используйте отключение проверки лицензии в продакшене.

---

## Способы отключения

### 1. Через переменную окружения (быстрый способ)

```bash
# Windows (CMD)
set STABLIMIT_DISABLE_LICENSE=true
python main.py

# Windows (PowerShell)
$env:STABLIMIT_DISABLE_LICENSE="true"
python main.py

# Linux/Mac
export STABLIMIT_DISABLE_LICENSE=true
python main.py
```

### 2. Через конфигурационный файл

Отредактируйте `~/.stablimit/config.yaml`:

```yaml
license:
  disable_check: true  # ← Включить отключение проверки
```

Или создайте файл, если его нет:

```bash
# Создать директорию
mkdir -p ~/.stablimit

# Создать config.yaml
cat > ~/.stablimit/config.yaml << EOF
license:
  disable_check: true
EOF
```

---

## Проверка

После отключения проверки лицензии в логах появится предупреждение:

```
⚠️  Проверка лицензии ОТКЛЮЧЕНА (режим тестирования)
```

Программа будет работать без проверки лицензии.

---

## Включение обратно

### Через переменную окружения:
```bash
# Просто не устанавливайте переменную или установите в false
unset STABLIMIT_DISABLE_LICENSE  # Linux/Mac
# или
set STABLIMIT_DISABLE_LICENSE=false  # Windows
```

### Через конфигурацию:
```yaml
license:
  disable_check: false  # ← Включить проверку обратно
```

---

## Примеры использования

### Тестирование без лицензии

```bash
# Временно отключить проверку
export STABLIMIT_DISABLE_LICENSE=true
python main.py

# После тестирования - включить обратно
unset STABLIMIT_DISABLE_LICENSE
```

### Разработка

Добавьте в `~/.stablimit/config.yaml`:
```yaml
license:
  disable_check: true
```

Это позволит работать без лицензии во время разработки.

---

## Безопасность

### ⚠️ Важно понимать:

1. **Отключение проверки лицензии** делает программу доступной без лицензии
2. **Используйте только для тестирования** и разработки
3. **Не коммитьте** конфигурацию с `disable_check: true` в репозиторий
4. **В продакшене** всегда должна быть включена проверка лицензии

### Рекомендации:

- Используйте переменную окружения для временного отключения
- Не добавляйте `disable_check: true` в конфигурацию по умолчанию
- Проверяйте наличие этой настройки перед релизом

---

## Логирование

При отключении проверки лицензии в логах записывается:

```
WARNING: ⚠️  Проверка лицензии ОТКЛЮЧЕНА (режим тестирования)
```

Это позволяет отслеживать, когда проверка отключена.

---

## Отладка

Если нужно проверить, отключена ли проверка:

```python
from utils.config import config

if config.get("license.disable_check", False):
    print("Проверка лицензии ОТКЛЮЧЕНА")
else:
    print("Проверка лицензии ВКЛЮЧЕНА")
```

Или через переменную окружения:

```python
import os

if os.environ.get('STABLIMIT_DISABLE_LICENSE', '').lower() == 'true':
    print("Проверка лицензии ОТКЛЮЧЕНА (через переменную окружения)")
```

